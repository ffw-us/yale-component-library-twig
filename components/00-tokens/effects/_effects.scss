@use '~@yalesites-org/tokens/build/scss/tokens';

@mixin animate(
  $property: all,
  $duration: var(--animation-speed-default),
  $function: ease-in-out,
  $delay: 0ms
) {
  @media (prefers-reduced-motion: no-preference) {
    transition: #{$property} #{$duration} #{$function} #{$delay};
  }
}

// This animation is to remove hidden items from screen readers and
// keyboard navigation, while maintaining the slow "close" effect.
// Apply this mixin to a selector that indicates the "hidden" state (not just.
// the element base class. It must specifically indicate "hidden".)
@mixin animate-hidden($speed: var(--animation-speed-default)) {
  visibility: hidden;
  animation: #{$speed} fade-out;
  animation-fill-mode: forwards;

  @keyframes fade-out {
    // Start visible at 0% to avoid an occasional "flash" when closing.
    0% {
      visibility: visible;
    }

    99% {
      visibility: visible;
    }

    100% {
      visibility: hidden;
    }
  }
}

:root {
  --underline-thick: var(--size-thickness-4);

  @media (min-width: tokens.$break-mobile) {
    --underline-thick: var(--size-thickness-8);
  }
}

@mixin underline-slide-start($variation: default, $size: 'thin') {
  @if $size == 'thick' {
    --thickness: var(--underline-thick);
    --position: 0 100%;

    // When using the 'thick' variation, add some space between the text and the
    // underline.
    padding-bottom: calc(var(--thickness) + var(--size-spacing-3));
  } @else {
    --thickness: var(--link-underline-size-default);
    --position: 0 1.15em;
  }

  // Add the decorative bar under links.
  background-image: linear-gradient(currentcolor, currentcolor);
  background-position: var(--position);
  background-repeat: no-repeat;
  transition: background-size var(--animation-speed-default) linear,
    color var(--animation-speed-default) ease-in-out;

  @if $variation == 'no-underline' {
    background-size: 0 var(--thickness);
  } @else {
    background-size: 100% var(--thickness);
  }
}

@mixin underline-slide-end($variation: default, $size: 'thin') {
  --thickness: var(--link-underline-size-default);

  @if $size == 'thick' {
    --thickness: var(--underline-thick);
  }

  @if $variation == 'no-underline' {
    background-size: 100% var(--thickness);
  } @else {
    background-size: 0 var(--thickness);
  }
}

@mixin underline-slide-none($size: 'thin') {
  --thickness: var(--link-underline-size-default);

  @if $size == 'thick' {
    --thickness: var(--underline-thick);
  }

  background-size: 0 var(--thickness);
}
