@mixin animate(
  $property: all,
  $duration: var(--animation-speed-default),
  $function: ease-in-out,
  $delay: 0ms
) {
  @media (prefers-reduced-motion: no-preference) {
    transition: #{$property} #{$duration} #{$function} #{$delay};
  }
}

// This animation is to remove hidden items from screen readers and
// keyboard navigation, while maintaining the slow "close" effect.
@mixin animate-hidden($speed: var(--animation-speed-default)) {
  visibility: hidden;
  animation: #{$speed} fade-out;
  animation-fill-mode: forwards;

  @keyframes fade-out {
    // Start visible at 0% to avoid an occasional "flash" when closing.
    0% {
      visibility: visible;
    }

    99% {
      visibility: visible;
    }

    100% {
      visibility: hidden;
    }
  }
}

@mixin underline-slide-start($variation: default, $size: 'thin') {
  $thickness: var(--link-underline-size-default);
  $position: 0 1.15em;

  @if $size == 'thick' {
    $thickness: var(--size-thickness-8);
    $position: 0 100%;
  }

  // Add the decorative bar under links.
  background-image: linear-gradient(currentcolor, currentcolor);
  background-position: $position;
  background-repeat: no-repeat;
  transition: background-size var(--animation-speed-default) linear,
    color var(--animation-speed-default) ease-in-out;

  @if $variation == 'no-underline' {
    background-size: 0 $thickness;
  } @else {
    background-size: 100% $thickness;
  }
}

@mixin underline-slide-end($variation: default, $size: 'thin') {
  $thickness: var(--link-underline-size-default);

  @if $size == 'thick' {
    $thickness: var(--size-thickness-8);
  }

  @if $variation == 'no-underline' {
    background-size: 100% $thickness;
  } @else {
    background-size: 0 $thickness;
  }
}

@mixin underline-slide-none($size: 'thin') {
  $thickness: var(--link-underline-size-default);

  @if $size == 'thick' {
    $thickness: var(--size-thickness-8);
  }

  background-size: 0 $thickness;
}
