{% set breadcrumbs__base_class = 'breadcrumbs' %}

{% set breadcrumbs__items = breadcrumbs__items|default(items) %}

{% set breadcrumbs__attributes = {
  'data-breadcrumbs-overflow': 'hidden',
  'data-component-width': 'max',
  class: bem('wrapper', [], breadcrumbs__base_class),
} %}

{# Get the parent label for the mobile toggle #}
{% set parent_count = breadcrumbs__items.length - 2 %}
{% set parent_label = breadcrumbs__items[parent_count].title %}

{% if breadcrumbs__items.2 %}
<div {{ add_attributes(breadcrumbs__attributes) }}>
  {% set control__content %}
    <span {{ bem('visually-hidden') }}>Show all breadcrumbs</span>
    {% include "@atoms/images/icons/_icon.twig" with {
      icon__name: 'angle-down',
      icon__blockname: breadcrumbs__base_class,
      icon__decorative: true,
    } %}
    <span aria-hidden="true">{{ parent_label }}</span>
  {% endset %}
  {% include "@atoms/controls/base/control.twig" with {
    control__blockname: breadcrumbs__base_class,
    aria_expanded: 'false',
    aria_controls: 'breadcrumbs-inner',
  } %}
  <div id="breadcrumbs-inner" {{ bem('inner', [], breadcrumbs__base_class) }}>
    {% include "@molecules/menu/menu.twig" with {
      items: breadcrumbs__items,
      menu__base_class: breadcrumbs__base_class,
      menu__name: 'Breadcrumb',
      menu__contextual: true,
      menu__list__type: 'ol',
    } %}
  </div>
</div>
{% endif %}
